(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{106:function(e,t,n){"use strict";function a(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()+4-(t.getUTCDay()||7))),a=new Date(Date.UTC(n.getFullYear(),0,1));return Math.ceil(((n.getTime()-a.getTime())/864e5+1)/7)}n.d(t,"a",(function(){return a}))},67:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return s})),function(e){e.development="development",e.production="production"}(a||(a={}));const o=()=>a.production,s=()=>o()===a.production},91:function(e,t,n){"use strict";n.r(t),n.d(t,"fetchCCXFamilyTemplates",(function(){return m})),n.d(t,"fetchCCXSeasonalTemplates",(function(){return u})),n.d(t,"fetchCCXTemplatesFontMetaData",(function(){return f})),n.d(t,"fetchFontMetaDataFromCDN",(function(){return p})),n.d(t,"getCCXOpenFontSpecimenHref",(function(){return c})),n.d(t,"getFamilyOpenHref",(function(){return i}));var a=n(67),o=n(7),s=n(106);n(3),n(26);const r=Object(a.a)()?{APIKey:"TypeKit2",CCHomeUrl:"https://cchome.adobe.io/int/v1/models",CCHomeCDNUrl:"https://uis-cdn.creativecloud.adobe.com/int/v1/models",CCXUrl:"https://express.adobe.com",FontsUrl:"https://fonts.adobe.com"}:{APIKey:"TypeKit2",CCHomeUrl:"https://cchome-stage.adobe.io/int/v1/models",CCHomeCDNUrl:"https://stage-uis-cdn.creativecloud.adobe.com/int/v1/models",CCXUrl:"https://express-stage.adobe.com",FontsUrl:"https://fonts-relstage.adobe.com"};function i(e){return`/fonts/${e}`}function c(e,t){return`${r.CCXUrl}/sp/design/post/new?${["workflow=blank","fallbackThresh=default","requestor=af",`font=${e}`,`fontSpecimen=${t}`].join("&")}`}function l(e,t,n){return new Promise(((a,o)=>{const s=(new Date).getTime();fetch(e).then((t=>{const n=(new Date).getTime();var a,o;return a=e,o=n-s,window.dispatchEvent(new CustomEvent("af-analytics",{detail:{componentName:"ccx-wavelength-api",eventName:"wavelength-api-response-time",url:a,responseTime:o}})),t.json()})).then((e=>{if(200===e.statusCode){const o=e.data.map((e=>({src:e.thumbnail,templateLink:`${r.CCXUrl}/sp/design/post/template/${e.id}?requestor=af`,fonts:e.fonts.map((e=>({name:e.psName,psName:e.psName,textFrame:e.textFrame,familySlug:""}))),templateDimensions:{width:e.size[0],height:e.size[1]},showPremium:e.premium&&!t,showActivationButton:!(e.premium&&n&&!t)})));a(o),"fallbacksUsed"in e&&Object.keys(e.fallbacksUsed).length>0&&d(Object.assign({fallbacksUsed:!0},e.fallbacksUsed))}else"errors"in e?(d({status:e.errors[0].status,message:e.errors[0].title}),o(`[Crossbar]: ${e.errors[0].status} received from API call`)):(d({status:e.statusCode}),o(`[Crossbar]: ${e.statusCode} received from API call`))})).catch((e=>{var t;d({errorName:e.name,errorMessage:e.message,error:e.toString(),errorStack:null===(t=e.stack)||void 0===t?void 0:t.toString()}),o(e)}))}))}function u(e,t,n,a){let i=Object(o.c)().toLowerCase();"ud"===i&&(i="us");const c=[`country=${i}`,`week=${Object(s.a)(new Date)}`,"sort=gs",`offset=${e}`,`limit=${t}`,`api_key=${r.APIKey}`];return l(`${r.CCHomeCDNUrl}/crossbar-templates-v1?${c.join("&")}`,n,a)}function m(e,t,n,a,o){return l(`${r.CCHomeCDNUrl}/crossbar-font-family-v1?${[`font-family=${e}`,`offset=${t}`,`limit=${n}`,`api_key=${r.APIKey}`].join("&")}`,a,o)}function f(e){const t=[],n={};return e.forEach((e=>{e.fonts.forEach((e=>{e.psName in n||(t.push(p(e.psName)),n[e.psName]=!0)}))})),Promise.allSettled(t).then((t=>{const n={};return t.forEach((e=>{if("fulfilled"===e.status){const t=e.value;n[t.postscript_name]=t}})),e.forEach((e=>{e.fonts.forEach((e=>{var t;const a=n[e.psName];a&&(e.familySlug=null===(t=a.family)||void 0===t?void 0:t.slug,e.id=a.id,e.name=a.name)}))})),e}))}function p(e){let t="en";"ja"==Object(o.f)(Object(o.d)())&&(t="ja");const n=`https://apicdn.typekit.net/v1/variations/${e}?locale=${t}&include=full&api_key=${r.APIKey}`;return new Promise(((e,t)=>{fetch(n).then((e=>{if(200===e.status)return e.json();t(`[Crossbar][FontMetadataAPI]: ${e.status} received from API call`)})).then((t=>e(t))).catch((e=>{t(e)}))}))}function d(e){window.dispatchEvent(new CustomEvent("af-analytics",{detail:Object.assign({componentName:"ccx-wavelength-api",eventName:"wavelength-api-call-error"},e)}))}}}]);
//# sourceMappingURL=7-c12abdf19c2dbb76865f.chunk.js.map